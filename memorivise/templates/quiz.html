{% extends 'base.html' %} {% block title%}
<title>Quiz</title>
{% endblock title%} {% block body%}
<div class="container">
  <hr />
  <h2 class="text-center">Quiz</h2>
  <hr />
  <div id="quiz" class="px-5 bg-dark-subtle py-5 rounded">
    <!-- <h3>General</h3> -->
    <h4 id="question"></h4>
    <ul id="choices"></ul>
    <button id="submit">Submit</button>
    <p id="score"></p>
  </div>
</div>
<style>
  #quiz {
    margin: auto;
  }

  h1,
  h2 {
    margin-bottom: 10px;
  }

  #choices {
    list-style-type: none;
    padding: 0;
  }

  #choices li {
    margin-bottom: 10px;
  }

  #submit {
    margin-top: 10px;
    padding: 10px;
    background-color: #4caf50;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
  }

  #submit:hover {
    background-color: #3e8e41;
  }
</style>
<script>
  var quizData = [
    {
      question: "What is the capital of France?",
      choices: ["Paris", "London", "Madrid", "Berlin"],
      answer: "Paris",
    },
    {
      question: "What is the tallest mountain in the world?",
      choices: ["Mount Everest", "Kilimanjaro", "Denali", "Mount Fuji"],
      answer: "Mount Everest",
    },
    {
      question: "What is the smallest country in the world?",
      choices: ["Monaco", "San Marino", "Vatican City", "Liechtenstein"],
      answer: "Vatican City",
    },
  ];

  let currentQuestion = 0;
  let score = 0;

  let questionEl = document.getElementById("question");
  let choicesEl = document.getElementById("choices");
  let submitBtn = document.getElementById("submit");
  let scoreEl = document.getElementById("score");

  function loadQuestion() {
    let currentQuizData = quizData[currentQuestion];
    questionEl.innerHTML = currentQuizData.question;
    choicesEl.innerHTML = "";
    for (var i = 0; i < currentQuizData.choices.length; i++) {
      let choice = currentQuizData.choices[i];
      let li = document.createElement("li");
      li.innerHTML = `
        <label for="${choice}_element">
          <input type='radio' name='choice' id="${choice}_element" value=${choice}>${choice}
        </label>  
          `;
      choicesEl.appendChild(li);
    }
  }

  function submitAnswer() {
    let selectedChoice = document.querySelector('input[name="choice"]:checked');
    if (!selectedChoice) {
      alert("Please select an answer.");
      return;
    }
    let answer = selectedChoice.value;
    if (answer === quizData[currentQuestion].answer) {
      score++;
    }
    selectedChoice.checked = false;
    currentQuestion++;
    if (currentQuestion === quizData.length) {
      quizEnd();
    } else {
      loadQuestion();
    }
  }

  function quizEnd() {
    questionEl.innerHTML = "Quiz complete!";
    choicesEl.style.display = "none";
    submitBtn.style.display = "none";
    scoreEl.innerHTML = `Your score is ${score} out of ${quizData.length}`;
    scoreEl.insertAdjacentHTML("afterend", `<button class="btn btn-secondary"><a class="text-light" href="https://google.com">Return Home</a></button>`)
  }

  loadQuestion();
  submitBtn.addEventListener("click", submitAnswer);
</script>
{% endblock body %}
