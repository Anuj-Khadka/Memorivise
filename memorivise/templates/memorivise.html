{% extends 'base.html' %}
{% block title %}
<title>Memorivise</title>
{% endblock title %}
{% block body %}
<div class="container">
<h1 class="mt-3">Memorivise</h1>

<form class="mt-3" method="POST" action="/memorivise">
  <div class="mb-3">
    <label for="title" class="form-label">Title</label>
    <input
      type="text"
      class="form-control"
      name="title"
      id="title"
      aria-describedby=""
      autocomplete="off"
    />
  </div>
  <div class="mb-3">
    <label for="decsription" class="form-label">Description</label>
    <textarea class="form-control" id="transcribed-text" name="document" rows="10" cols="50"></textarea>
  </div>
      <div class="mt-3">
      <a id="transcribe-btn" class="btn btn-secondary me-2">Start Recording</a>
      <button id="stop-btn" class="btn btn-secondary" type="submit"> Submit Problem </button>
    </div>
    </form>

        <div class="revive-card-container my-5 container">
          <h3>Memorivised Documents</h3>
          <div class="revise-cards mt-3">
            <div class="row card-row d-flex">
      
              {% if revisions|length < 1 %}
              <h6 class="lead"> there are no saved documents available.</h6>
              {% else%}
              {% for revision in revisions %}
              <div class="card me-2 mb-4 col-lg-4">
                <div class="card-body">
                  <h5 class="card-title">{{ revision.title }}</h5>
                  <p class="card-text card-desc" style="filter:blur(3px);">
                      {{ revision.document }}
                  </p>
                  <a href="#" class="card-link">Revise</a>
                  <a href="revise/update/{{revision.id}}" class="card-link">Update</a>
                  <a href="revise/delete/{{revision.id}}" class="card-link">Delete</a>
                </div>
              </div>
            </div>
              {% endfor %}
              {% endif %}
            </div>
              <script>
                const transcribeBtn = document.getElementById('transcribe-btn');
                const transcribedText = document.getElementById('transcribed-text');
              
                transcribeBtn.addEventListener('click', () => {
                    fetch('/transcribe')
                        .then(response => response.json())
                        .then(text => {
                            transcribedText.value = text.text;
                            // console.log(text)
                        });
                });
              </script>
              </html>
{% endblock body %}